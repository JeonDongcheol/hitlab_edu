## 2. Component / Directive
**2.1. 컴포넌트 란?**

>Angular 애플리케이션을 구성하는 기본 요소

1. import 영역

 - Angular 라이브러리 모듈 또는 사용자 모듈 호출

```
import { Component } from '@angular/core';
```

2. 컴포넌트 장식자

 - 컴포넌트와 관련된 설정 정보를 입력

```
@Component({
  selector: 'app-root',
  template: '<div>Angular Study</div>'
})
```
``
select 속성 : 템플릿을 나타낼 컴포넌트 이름 정의
``

``
template 속성 : 컴포넌트의 UI 코드 정의
``

3. 컴포넌트 클래스 영역

- 템플릿 데이터 출력과 관련된 로직 처리

```
export class AngularComponent {
  title = 'Angular Component';
}
```

**2.2. 컴포넌트 사용**
> 컴포넌트를 사용하기 위해서는 컴포넌트 추가 및 모듈 등록 과정을 거쳐야한다.

 1. 컴포넌트 추가
 
 - 컴포넌트를 추가할 때는 컴포넌트 파일을 먼저 만든다.
 - 여기서는 ``my.component.ts`` 파일을 생성한다.
 그리고 다음과 같이 컴포넌트 내용을 정의한다.
 ```
 // 컴포넌트 관련 모듈 호출
 import { Component } from '@angular/core';
 
 // 컴포넌트 설정
 @Component({
  selector: 'my-component',
  template: ``
 })
 
 export class MyComponent {
 // 컴포넌트 로직 추가
 }
 ```
 
 2. 컴포넌트를 모듈에 등록
 
 - 컴포넌트를 추가한 후 컴포넌트를 사용하기 위해서 모듈에 컴포넌트를 등록해야 한다.
 ``app.module.ts`` 파일의 declarations에 사용할 컴포넌트를 선언한다.
 ```
 import { MyComponent } from './my.component';    //.ts는 생략
 
 @ngModule({
  declarations: [
   MyComponent
  ]
 })
 export class AppModule { ... }
 ```
 
 **2.3. 지시자 란?**
>애플리케이션 구성요소에게 특정 이벤트를 지시하는 것

>컴포넌트 / 구조 / 속성 / 커스텀 지시자로 분류

 1. 컴포넌트 지시자
 
 - 컴포넌트의 템플릿을 표시하기 위한 지시자
   
 ex) 자식 컴포넌트 지시자를 부모 컴포넌트에서 사용
 ```
 @Component({
  selector: 'child-cmp',
  template: `<div>자식</div>`
 })
 
 export class ChildComponent { }
 ```
 ```
 @Component({
  selector: 'parent-cmp',
  template: `<child-cmp></child-cmp>`
 })
 
 export class ParentComponent { }
 ```

 2. 구조 지시자
 
 - HTML 문서 내의 DOM 의 형태를 제어할 수 있는 지시자
 - Angular에서 제공하는 내장 지시자이며 ng 접두어가 붙어있음
 
 ex) ngIf : 입력 조건에 따라 DOM 요소의 표시 여부 결정 
 ```
 <div *ngIf="student" >{{student.name}}</div>
 ```
 student의 값이 존재하면 div 요소가 출력되고 값이 존재하지 않으면 출력되지 않는다.

 3. 속성 지시자
 
 - @directive 어노테이션을 사용하고 DOM 요소를 제어
 - 네이티브 엘리먼트 속성과 구분하기 위해 접두어로 ng 사용

 ex) ngClass / ngStyle

 4. 커스텀 지시자
 
 - 사용자가 정의할 수 있는 지시자
 
 - "파일명.directive.ts" 형태로 파일 추가 
 
 ex1) 커스텀 지시자 생성 (custom.directive.ts)
 ```
 import { Directive } from '@angular/core';
 
 @Directive({
  selector: '[my-click]',
  host: { '(click)': 'onClick()'}
 })
 
 export class MyClickDirective { 
  onClick() {
  alert('hello');
  }
 }
 ```
 ex2) app.module에 등록
 ```
 import { MyClickDirective } from './custom.directive';
 
 @ngModule({
  declaratons: [
  CustomDirectiveCmp, MyClickDirective,
  ], ...
 })
 ```
 ex3) 커스텀 지시자 사용
 ```
 import { Component } from '@angular/core';
 
 @Component({
  selector: 'app-custom-directive',
  template: `<button my-click> onClick() </button>`
 })
 export class CustomDirectiveCmp {
  constructor() {}
 }
 ```
 위의 컴포넌트 실행 후 버튼을 클릭하면 my-click 지시자가 동작하고, my-click 지시자는 클릭 이벤트를 처리하기 위해 
 host 설정을 하였으므로 onClick()함수를 통해 알림창을 띄운다.
 
 **2.4. 기타**
 
 >HTML 어트리뷰트는 대소문자를 구분하지 않으므로 이름을 대문자에서 소문자로 고치고, 사이에 -을 넣어주는 표기법인 ``kebab-case`` 를 사용한다.
 
 >``@angular/core``는 Angular를 구성하는 주요 요소의 장식자 및 핵심 모듈을 포함하는 Angular 라이브러리 모듈이다.

 **2.5. 튜토리얼**
 >이 튜토리얼에서는 Todo List 페이지를 만드는 실습을 통해 Angular의 구성요소인 Component(컴포넌트)와 Directive(지시자)에 대해 학습해본다.

Task
- Angular CLI 설치

`Angular CLI` :  Angular 프로젝트의 설정이나 관리를 명령어 기반으로 수행할 수 있게 지원

먼저, Angular CLI를 설치하고 프로젝트를 생성한다.  
```
npm install -g @angular/cli
ng new my-app
```

그리고 생성된 프로젝트에 새 Component를 추가한다.
이 때, 컴포넌트가 생성되고 `app.module`에 등록된다.
```
ng g component todos
```
그러면 다음과 같은 디렉토리 구조를 갖게된다.
```
index.html
(app)
├ app.component.html 
├ app.component.ts
├ app.module.ts
└ (todos) ┌ todos.component.html
	  ├ todos.component.ts
          └ todos.module.ts
```

[Step1] `index.html`에 `app.component.ts`의 `selector`속성 값을 가져오고,
```
<!doctype html>
<html lang="ko">
<head>
  ...
</head>
<body>
  <app-root></app-root>
</body>
</html>
```

`app.component.html`에는 `todos.component.ts`의 `selector`속성 값을 가져와 각각의 컴포넌트를 연결한다.
```
<h1>
    Todo List {{ title }}!
</h1>
<app-todos></app-todos>
```

[Step2] `todos.component.ts`의 `class`에는 `todos.component.html`에 나타낼 화면을 처리하는 로직을 추가한다.
```
export class TodosComponent implements OnInit {
  todos;
  text;
  ngOnInit() {
    this.todos = [
      {
        text: 'UI잘만들기'
      },
      {
        text: '점심챙겨먹기'
      },
      {
        text: '수강신청하기'
      }
    ];
  }
```

[Step3] `todos.component.html`에 `*ngFor` 구조 지시자를 이용해 Step2에서 생 `todos`를 가져와 화면에 리스트로 출력한다. 
```
<h3>Todo List</h3>
<ul>
  <li *ngFor = "let todo of todos">
    {{todo.text}} 
  </li>
</ul>
```
[Step4] 서버 실행 후 `localhost:4200`에 접속하면 다음과 같은 페이지가 나온다.
![튜토리얼1][Tutorial1]
[Step5] 다시 `todos.component.ts`로 돌아가 일정추가 및 삭제를 위한 로직을 `class`에 추가한다. 
```
export class TodosComponent implements OnInit {
  todos;
  text;
  ngOnInit() {
    this.todos = [
      {
        text: 'UI 잘 만들기'
      },
      {
        text: '점심 챙겨먹기'
      },
      {
        text: '수강신청하기'
      }
    ];
  }
    addTodo(){
    	this.todos.push({
    	text: this.text
    });
  }

    deleteTodo(todoText){
      	for(var i = 0; i < this.todos.length; i++){
        if(this.todos[i].text === todoText){
        this.todos.splice(i,1);
        }
      }
    }
}
```
[Step6] Step5에서 추가한 로직을 화면에 나타내고 이벤트를 처리하기 위해 `todos.component.html`을 다음과 같이 수정한다. 
```
<h3> 할 일 추가</h3>
<form (submit)="addTodo()">
  <input [(ngModel)]="text" name="kyung">
</form>

<h3>Todo List</h3>
<ul>
  <li *ngFor = "let todo of todos">
    {{todo.text}} <button (click)="deleteTodo(todo.text)">삭제</button>
  </li>
</ul>
```
[Step7] `form`을 `app.module.ts`에 등록한다.
```
import { FormsModule } from '@angular/forms';
...

@NgModule({
  imports: [
    FormsModule
  ]
  ...
})
export class AppModule { }
```
[Step8] 실행 및 결과

`ng serve --open`

![튜토리얼2][Tutorial2]

>이 튜토리얼에서는 컴포넌트 사용 과정과 포함관계, 컴포넌트 지시자와 구조 지시자 중 하나인 ``ngFor`` 지시자를 사용해 엘리먼트를 표시해보았다.

---
[Tutorial1]:https://user-images.githubusercontent.com/29030507/35314683-29e61864-010b-11e8-8d05-08c3ec4754ff.PNG
[Tutorial2]:https://user-images.githubusercontent.com/29030507/35315143-202d9290-010e-11e8-804d-6cd82bc2c52c.PNG

